<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<h:form id="deleteAppLinkForm">
		<p:dialog widgetVar="deleteAppLinkDlg" modal="true" closable="false" resizable="false" showHeader="false">
			<button type="button" class="bootbox-close-button close" onclick="PF('deleteAppLinkDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-trash-o red" />
					<h:outputText value=" Delete AppLink" />
				</h4>
			</div>
			<div class="modal-body">
				<h:outputText value="Are you sure you want to delete this item ?" style="margin-left: 20px" />
			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('deleteAppLinkDlg').hide()" value="Hide" styleClass="btn btn-warning" />
				<p:commandButton action="#{appLinkView.delete()}" value="Delete" styleClass="btn btn-danger" oncomplete="PF('deleteAppLinkDlg').hide()" update=":main_form"/>
			</div>
		</p:dialog>
	</h:form> 
	
	<h:form id="deleteAllForm">
		<p:dialog widgetVar="deleteAllDlg" modal="true" closable="false" resizable="false" showHeader="false">
			<button type="button" class="bootbox-close-button close" onclick="PF('deleteAllDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-trash-o red" />
					<h:outputText value=" Delete AppLink" />
				</h4>
			</div>
			<div class="modal-body">
				<h:outputText value="Are you sure you want to delete this item ?" style="margin-left: 20px" />
			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('deleteAllDlg').hide()" value="Hide" styleClass="btn btn-warning" />
				<p:commandButton action="#{appLinkView.deleteAll()}" value="Delete" styleClass="btn btn-danger" oncomplete="PF('deleteAllDlg').hide()" update=":main_form"/>
			</div>
		</p:dialog>
	</h:form> 

	<h:form id="viewForm">
		<p:dialog widgetVar="viewDlg" modal="true" closable="false" resizable="false" showHeader="false">
			<button type="button" class="bootbox-close-button close" onclick="PF('viewDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-list-alt blue" />
					<h:outputText value=" View Details" />
				</h4>
			</div>
			<div class="modal-body">
				<f:subview rendered="#{appLinkView.model.tool != null}">
					<div class="row">
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Matricule" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.matricule}" styleClass="orange" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Status" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.status}" styleClass="bolder #{appLinkView.model.tool.status=='active'?'green':'red'}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Category" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.tooltype.toolcategory.classification}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Brand" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.brand.name}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>

						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Beneficiary" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.beneficiaryFullName}" styleClass="bolder blue" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="State" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.state}" styleClass="bolder blue" rendered="#{appLinkView.model.tool.state='Requested'}" />
										<h:outputText value="#{appLinkView.model.tool.state}" styleClass="bolder green" rendered="#{appLinkView.model.tool.state='Allocated'}" />
										<h:outputText value="#{appLinkView.model.tool.state}" styleClass="bolder light-blue" rendered="#{appLinkView.model.tool.state='Not Allocated'}" />
										<h:outputText value="#{appLinkView.model.tool.state}" styleClass="bolder purple" rendered="#{appLinkView.model.tool.state='Acknowledged'}" />
										<h:outputText value="#{appLinkView.model.tool.state}" styleClass="bolder grey" rendered="#{appLinkView.model.tool.state='Return in Progress'}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Type" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.tooltype.name}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Brand Type" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.tool.brandtype.name}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
					</div>
				</f:subview>
				<f:subview rendered="#{appLinkView.model.deliveryRequest != null}">
					<div class="row">
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Matricule" />
									</div>
									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.reference}" styleClass="bolder #{appLinkView.model.deliveryRequest.type.color}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Project" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.project.name}" styleClass="green" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Priority" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.priority.value}" styleClass="#{appLinkView.model.deliveryRequest.priority.color}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Needed Delivery Date" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.neededDeliveryDate}" styleClass="purple bolder">
											<f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
										</h:outputText>
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Transportation Needed" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.transportationNeeded?'Yes':'No'}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Type" />
									</div>
									<div class="profile-info-value">
										<h:outputText value=" #{appLinkView.model.deliveryRequest.type.value}" styleClass="#{appLinkView.model.deliveryRequest.type.color}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Warehouse" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.warehouse.name}" styleClass="pink" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Requester" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.requester.fullName}" styleClass="bolder orange" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Important" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.deliveryRequest.important?'Yes':'No'}" styleClass="#{appLinkView.model.deliveryRequest.important?'red':'grey'}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
					</div>
				</f:subview>
				<f:subview rendered="#{appLinkView.model.transportationRequest != null}">
					<div class="row">
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Reference" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.reference}" styleClass="bolder blue" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Origin DN Number" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.deliveryRequest.originNumber}" styleClass="bolder orange" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Priority" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.deliveryRequest.priority.value}" styleClass="bolder #{appLinkView.model.transportationRequest.deliveryRequest.priority.color}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Important" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.deliveryRequest.important?'Yes':'No'}"
											styleClass="#{appLinkView.model.transportationRequest.deliveryRequest.important?'red':'grey'}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Status" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.status.value}" styleClass="#{appLinkView.model.transportationRequest.status.color}" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Delivery Request" />
									</div>

									<div class="profile-info-value">
										<h:outputLink value="viewDeliveryRequest.xhtml" target="blank">
											<h:outputText value="#{appLinkView.model.transportationRequest.deliveryRequest.reference}" styleClass="bolder #{appLinkView.model.transportationRequest.deliveryRequest.type.color}" />
											<f:param name="id" value="#{appLinkView.model.transportationRequest.deliveryRequest.id}" />
										</h:outputLink>
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="DN Type" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.transportationRequest.deliveryRequest.type.value}" styleClass="#{appLinkView.model.transportationRequest.deliveryRequest.type.color}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
					</div>
				</f:subview>
				<f:subview rendered="#{appLinkView.model.warehouse != null}">
					<div class="row">
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Name" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.warehouse.name}" styleClass="bolder blue" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Phone" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.warehouse.phone}" styleClass="orange" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Address" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.warehouse.address1}" />
										<br />
										<h:outputText value="#{appLinkView.model.warehouse.address2}" />
										<br />
										<h:outputText value="#{appLinkView.model.warehouse.address3}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="GPS Coordiantes" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.warehouse.latitude}" styleClass="light-blue">
											<f:convertNumber type="number" maxFractionDigits="6" />
										</h:outputText>
										<h:outputText value="#{appLinkView.model.warehouse.longitude}" styleClass="light-blue">
											<f:convertNumber type="number" maxFractionDigits="6" />
										</h:outputText>
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Fax" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.warehouse.fax}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
					</div>
				</f:subview>
				<f:subview rendered="#{appLinkView.model.office != null}">
					<div class="row">
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Name" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.office.name}" styleClass="bolder blue" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Phone" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.office.phone}" styleClass="orange" />
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Address" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.office.address1}" />
										<br />
										<h:outputText value="#{appLinkView.model.office.address2}" />
										<br />
										<h:outputText value="#{appLinkView.model.office.address3}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6">
							<div class="profile-user-info profile-user-info-striped">
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="GPS Coordiantes" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.office.latitude}" styleClass="light-blue">
											<f:convertNumber type="number" maxFractionDigits="6" />
										</h:outputText>
										<h:outputText value="#{appLinkView.model.office.longitude}" styleClass="light-blue">
											<f:convertNumber type="number" maxFractionDigits="6" />
										</h:outputText>
										&nbsp;
									</div>
								</div>
								<div class="profile-info-row">
									<div class="profile-info-name">
										<h:outputText value="Fax" />
									</div>

									<div class="profile-info-value">
										<h:outputText value="#{appLinkView.model.office.fax}" />
										&nbsp;
									</div>
								</div>
							</div>
						</div>
					</div>
				</f:subview>
			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('viewDlg').hide()" value="Hide" styleClass="btn btn-warning" />
			</div>
		</p:dialog>
	</h:form>

	<h:form id="appLinkListForm">
		<p:dialog widgetVar="appLinkListDlg" modal="true" closable="false" resizable="false" showHeader="false" width="1000">
			<button type="button" class="bootbox-close-button close" onclick="PF('appLinkListDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-list " />
					<h:outputText value=" List" />
				</h4>
			</div>
			<div class="modal-body" style="width: 100%">
				<div class="row">
					<div class="col-sm-offset-1 col-sm-10">
						<div class="table-header col-sm-12 col-xs-12">
							<div class="col-sm-9 hidden-xs">
								<i class="fa fa-list" />
								<h:outputText value=" App Link List" />
							</div>
						</div>
						<div class="col-sm-12 col-xs-12 aa-datatable-container">
							<p:dataTable value="#{appLinkView.findByAssociatedObject()}" var="item" rows="20" styleClass="table table-striped table-hover" paginatorAlwaysVisible="false" paginator="true"
								paginatorPosition="bottom" paginatorTemplate="{JumpToPageDropdown} {LastPageLink} {FirstPageLink}  {PageLinks}">

								<p:column headerText="Associated Object">
									<h:outputText value="#{item.associatedObjectName}" />
								</p:column>

								<p:column headerText="Cost Type">
									<h:outputText value="#{item.costType.value}" styleClass="blue bolder" />
								</p:column>

								<p:column headerText="Start Date">
									<h:outputText value="#{item.startDate}">
										<f:convertDateTime pattern="yyyy-MM-dd" />
									</h:outputText>
								</p:column>

								<p:column headerText="End Date">
									<h:outputText value="#{item.endDate}">
										<f:convertDateTime pattern="yyyy-MM-dd" />
									</h:outputText>
								</p:column>

								<p:column headerText="Cost">
									<h:outputText value="#{item.amount}" styleClass="red bolder">
										<f:convertNumber type="number" maxFractionDigits="2" />
									</h:outputText>
									<h:outputText value=" #{acceptanceView.model.currencyName}" styleClass="red bolder" />
								</p:column>

								<p:column headerText="Acceptance">
									<h:outputLink value="viewAcceptance.xhtml" target="blank">
										<h:outputText value="#{item.acceptanceNumero}" />
										<f:param name="id" value="#{item.acceptanceId}" />
									</h:outputLink>
								</p:column>

								<p:column headerText="Expensepayment ">
									<h:outputText value="#{item.expensepaymentId}" />
								</p:column>

							</p:dataTable>
						</div>
					</div>
				</div>


			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('appLinkListDlg').hide()" value="Hide" styleClass="btn btn-warning" />
			</div>
		</p:dialog>
	</h:form>

	<h:form id="addForm">
		<p:dialog widgetVar="addDlg" modal="true" closable="false" resizable="false" showHeader="false" width="1000">
			<button type="button" class="bootbox-close-button close" onclick="PF('addDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-list " />
					<h:outputText value=" Add Detail" />
				</h4>
			</div>
			<div class="modal-body" style="width: 100%">
				<p:messages id="messages" closable="true" />
				<div class="row">
					<div class="col-xs-12 col-sm-6">
						<div class="form-group">
							<label class="col-xs-3 col-sm-3 control-label no-padding-right" for="form-field-basename">
								<h:outputText value="Cost Type" />
							</label>
							<div class="col-xs-9 col-sm-9">
								<h:selectOneMenu value="#{appLinkView.model.costType}" required="true" requiredMessage="Cost Type should not be null">
									<f:selectItem itemLabel="---" noSelectionOption="true" />
									<f:selectItems value="#{appLinkView.remainingCostTypeList}" var="item" itemLabel="#{item.value}" itemValue="#{item}" />
									<p:ajax listener="#{appLinkView.costTypeListener()}" update="amount,panel1,dates" />
								</h:selectOneMenu>
							</div>
						</div>
					</div>
				</div>
				<hr />
				<div class="row">
					<div class="col-xs-12 col-sm-6">
						<div class="form-group">
							<label class="col-xs-3 col-sm-3 control-label no-padding-right" for="form-field-basename">
								<h:outputText value="Partial / Total" />
							</label>
							<div class="col-xs-9 col-sm-9">
								<h:selectOneMenu value="#{appLinkView.model.total}" style="width:178px">
									<f:selectItem itemLabel="---" noSelectionOption="true" />
									<f:selectItem itemLabel="Total" itemValue="true" />
									<f:selectItem itemLabel="Partial" itemValue="false" />
									<p:ajax listener="#{appLinkView.updateAmount()}" update="amount" />
								</h:selectOneMenu>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6">
						<div class="form-group">
							<label class="col-xs-3 col-sm-3 control-label no-padding-right" for="form-field-basename">
								<h:outputText value="Cost" />
							</label>
							<div class="col-xs-9 col-sm-9">
								<p:inputText id="amount" value="#{appLinkView.model.amount}" readonly="#{appLinkView.model.total}" required="true" requiredMessage="Cost Type should not be null" />
							</div>
						</div>
					</div>
				</div>
				<div class="space-4" />
				<h:panelGroup id="dates">
					<f:subview rendered="#{appLinkView.model.costType.showDates()}">
						<div class="row">
							<div class="col-xs-12 col-sm-6">
								<div class="form-group">
									<label class="col-xs-3 col-sm-3 control-label no-padding-right" for="form-field-basename">
										<h:outputText value="Start Date" />
									</label>
									<div class="col-xs-9 col-sm-9">
										<p:calendar value="#{appLinkView.model.startDate}" navigator="true" required="#{appLinkView.model.costType.requireDates()}" requiredMessage="Start Date should not be null" />
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6">
								<div class="form-group">
									<label class="col-xs-3 col-sm-3 control-label no-padding-right" for="form-field-basename">
										<h:outputText value="End Date" />
									</label>
									<div class="col-xs-9 col-sm-9">
										<p:calendar value="#{appLinkView.model.endDate}" navigator="true" required="#{appLinkView.model.costType.requireDates()}" requiredMessage="End Date should not be null" />
									</div>
								</div>
							</div>
						</div>
					</f:subview>
				</h:panelGroup>
				<h4 class="header blue bolder smaller">
					<h:outputText value="Map With" />
				</h4>
				<h:panelGroup id="panel1">
					<f:subview rendered="#{appLinkView.renderTools()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="Tool List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchTool}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.toolList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.tool}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Matricule">
											<h:outputText value="#{item.matricule}" styleClass="purple bolder" />
										</p:column>

										<p:column headerText="Type">
											<h:outputText value="#{item.tooltype}" styleClass="blue" />
										</p:column>

										<p:column headerText="Brand">
											<h:outputText value="#{item.brand}" styleClass="green" />
										</p:column>

										<p:column headerText="Brand Type">
											<h:outputText value="#{item.brandtype}" styleClass="orange" />
										</p:column>

										<p:column headerText="Beneficiary">
											<h:outputText value="#{item.beneficiaryFullName}" styleClass="pink" />
										</p:column>

										<p:column headerText="SN">
											<h:outputText value="#{item.serialNumber}" />
										</p:column>

										<p:column headerText="Status">
											<h:outputText value="#{item.status}" styleClass="bolder #{item.status=='active'?'green':'red'}" />
										</p:column>

										<p:column headerText="Status">
											<h:outputText value="#{item.state}" styleClass="bolder blue" rendered="#{item.state='Requested'}" />
											<h:outputText value="#{item.state}" styleClass="bolder green" rendered="#{item.state='Allocated'}" />
											<h:outputText value="#{item.state}" styleClass="bolder light-blue" rendered="#{item.state='Not Allocated'}" />
											<h:outputText value="#{item.state}" styleClass="bolder purple" rendered="#{item.state='Acknowledged'}" />
											<h:outputText value="#{item.state}" styleClass="bolder grey" rendered="#{item.state='Return in Progress'}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
					<f:subview rendered="#{appLinkView.renderDeliveryRequests()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="DeliveryRequest List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchDeliveryRequest}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.deliveryRequestList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.deliveryRequest}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Reference">
											<h:outputText value="#{item.reference}" styleClass="bolder #{item.type.color}" />
										</p:column>

										<p:column headerText="Project">
											<h:outputText value="#{item.projectName}" />
										</p:column>

										<p:column headerText="Origin DN">
											<h:outputText value="#{item.originNumber}" />
										</p:column>

										<p:column headerText="Status">
											<h:outputText value="#{item.status.value}" styleClass="#{item.status.color.badge}" />
										</p:column>

										<p:column headerText="Requester">
											<h:outputText value="#{item.requesterFullName}" styleClass="blue" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
					<f:subview rendered="#{appLinkView.renderTransportationRequests()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="TransportationRequest List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchTransportationRequest}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.transportationRequestList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.transportationRequest}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Reference">
											<h:outputText value="#{item.reference}" styleClass="bolder #{item.deliveryRequestType.color}" />
										</p:column>

										<p:column headerText="Project">
											<h:outputText value="#{item.projectName}" />
										</p:column>

										<p:column headerText="Status">
											<h:outputText value="#{item.status.value}" styleClass="#{item.status.color}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
					<f:subview rendered="#{appLinkView.renderWarehouses()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="Warehouse List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchWarehouse}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.warehouseList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.warehouse}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Name">
											<h:outputText value="#{item.name}" styleClass="bolder blue" />
										</p:column>

										<p:column headerText="Address">
											<h:outputText value="#{item.address1}" />
										</p:column>

										<p:column headerText="Phone">
											<h:outputText value="#{item.phone}" />
										</p:column>

										<p:column headerText="Fax">
											<h:outputText value="#{item.fax}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
					<f:subview rendered="#{appLinkView.renderOffices()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="Office List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchOffice}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.officeList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.office}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Name">
											<h:outputText value="#{item.name}" styleClass="bolder blue" />
										</p:column>

										<p:column headerText="Address">
											<h:outputText value="#{item.address1}" />
										</p:column>

										<p:column headerText="Phone">
											<h:outputText value="#{item.phone}" />
										</p:column>

										<p:column headerText="Fax">
											<h:outputText value="#{item.fax}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
					<f:subview rendered="#{appLinkView.renderUsers()}">
						<div class="row">
							<div class="col-sm-12">
								<div class="table-header col-sm-12 col-xs-12">
									<div class="col-sm-10 col-xs-8">
										<i class="fa fa-list" />
										<h:outputText value="User List" />
									</div>
									<div class="col-sm-2 col-xs-4">
										<div class="nav-search minimized">
											<span class="input-icon">
												<p:inputText value="#{appLinkView.searchUser}" placeholder="Search..." styleClass="input-small nav-search-input" autocomplete="off">
													<p:ajax event="keyup" update="main_tab" />
												</p:inputText>
												<i class="ace-icon fa fa-search nav-search-icon" />
											</span>
										</div>
									</div>
								</div>
								<div class="col-sm-12 col-xs-12 aa-datatable-container">
									<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.userList2}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
										style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}"
										selection="#{appLinkView.user}" selectionMode="single" rowSelectMode="row" rowKey="#{item.id}">

										<p:column headerText="Full Name">
											<h:outputText value="#{item.fullName}" styleClass="bolder blue" />
										</p:column>

										<p:column headerText="Status">
											<h:outputText value="#{item.status}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</div>
					</f:subview>
				</h:panelGroup>
			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('addDlg').hide()" value="Hide" styleClass="btn btn-warning" />
				<p:commandButton action="#{appLinkView.save()}" value="Save" styleClass="btn btn-success" update="messages,:main_form:appLinkList,:main_form:summary,:main_form:easy-pie-chart-script" />
			</div>
		</p:dialog>
	</h:form>



	<h:form id="addFromExcelForm">
		<p:dialog widgetVar="addFromExcelDlg" modal="true" closable="false" resizable="false" showHeader="false" width="1000">
			<button type="button" class="bootbox-close-button close" onclick="PF('addFromExcelDlg').hide()">
				<h:outputText value="x" />
			</button>
			<div class="modal-header">
				<h4 class="modal-title">
					<i class="ace-icon fa fa-list " />
					<h:outputText value=" Add Detail" />
				</h4>
			</div>
			<div class="modal-body" style="width: 100%">
				<p:messages id="messages" closable="true" />
				<div class="row">
					<div class="col-xs-12 col-sm-6">
						<div class="form-group">
							<label class="col-xs-3 col-sm-3 control-label no-paddFromExceling-right" for="form-field-basename">
								<h:outputText value="Cost Type" />
							</label>
							<div class="col-xs-9 col-sm-9">
								<h:selectOneMenu value="#{appLinkView.model.costType}" required="true" requiredMessage="Cost Type should not be null">
									<f:selectItem itemLabel="---" noSelectionOption="true" />
									<f:selectItems value="#{appLinkView.remainingCostTypeList}" var="item" itemLabel="#{item.value}" itemValue="#{item}" />
									<p:ajax update="fileUpload" />
								</h:selectOneMenu>
							</div>
						</div>
					</div>
				</div>
				<hr />
				<h:panelGroup id="fileUpload">
					<p:fileUpload fileUploadListener="#{appLinkView.uploadExcelFile}" previewWidth="40" mode="advanced" dragDropSupport="true" multiple="true" update=":addFromExcelForm:messages,main_tab"
						sizeLimit="20000000" allowTypes="/(\.|\/)(xls)$/" style="margin: auto;width: 80%" rendered="#{appLinkView.model.costType!=null}" />
					<div style="margin: auto; width: 80%">
						<small>
							<h:outputLink value="/resources/docs/#{appLinkView.model.costType.showDates()?'mapping-1.xls':'mapping-2.xls'}" target="blank" rendered="#{appLinkView.model.costType!=null}">
								<h:outputText value="Download template : #{appLinkView.model.costType.showDates()?'mapping-1.xls':'mapping-2.xls'}" styleClass="blue" />
							</h:outputLink>
						</small>
					</div>
					<div class="space-4" />
					<div class="row">
						<div class="col-sm-12">
							<div class="table-header col-sm-12 col-xs-12">
								<i class="fa fa-list" />
								<h:outputText value="Uploaded File" />
							</div>
							<div class="col-sm-12 col-xs-12 aa-datatable-container">
								<p:dataTable id="main_tab" widgetVar="main_tab" value="#{appLinkView.appLinkList}" rows="5" var="item" styleClass="table table-striped table-bordered table-hover center"
									style="width: 100%;font-size: 9px" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="false" paginatorTemplate="{PageLinks}  {JumpToPageDropdown}">

									<p:column headerText="Reference">
										<h:outputText value="#{item.associatedObjectName}" styleClass="purple bolder" />
									</p:column>

									<p:column headerText="Amount">
										<h:outputText value="#{item.amount}" styleClass="bolder red" />
										<h:outputText value=" #{acceptanceView.model.currencyName}" styleClass="bolder red" />
									</p:column>

									<p:column headerText="Start Date" rendered="#{appLinkView.model.costType.showDates()}">
										<h:outputText value="#{item.startDate}">
											<f:convertDateTime pattern="yyyy-MM-dd" />
										</h:outputText>
									</p:column>

									<p:column headerText="End Date" rendered="#{appLinkView.model.costType.showDates()}">
										<h:outputText value="#{item.endDate}">
											<f:convertDateTime pattern="yyyy-MM-dd" />
										</h:outputText>
									</p:column>

								</p:dataTable>
							</div>
						</div>
					</div>
				</h:panelGroup>
			</div>
			<div class="modal-footer">
				<p:commandButton onclick="PF('addFromExcelDlg').hide()" value="Hide" styleClass="btn btn-warning" />
				<p:commandButton action="#{appLinkView.saveList()}" value="Save" styleClass="btn btn-success" update=":main_form" oncomplete="PF('addFromExcelDlg').hide()" />
			</div>
		</p:dialog>
	</h:form>







</ui:composition>
